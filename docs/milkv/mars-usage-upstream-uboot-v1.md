# 操作说明

## 物料准备

- USB Type-C PD 电源
- microSD 卡
  - 固件刷写
- \[可选] 串口适配器
  - 建议使用 3.3V 逻辑电平
  - 监看 Bootloader 的调试输出、选择系统启动项
  - 操作系统默认串口终端
- 计算机
  - 运行 Linux 发行版、macOS 或 Windows
  - \[可选] 已安装串口终端工具
    - puTTY、minicom 等
  - 已安装压缩包解压工具
    - 支持 zstd 格式
  - 已安装镜像烧录工具

## 固件刷写

### 使用固件自动升级镜像

#### 准备固件自动升级镜像

下载文件列表中标记为「固件升级镜像」的条目，解压得到可烧录的 `firmware_updater.sd.img` 镜像文件。

将该镜像刷写至 microSD 卡。

#### 配置板卡至 SD 卡启动模式

拨动板卡上的 2 位拨码开关。将 1 位拨至靠近 ON 标记的一侧；将 2 位拨至远离 ON 标记的一侧。

#### 执行自动升级

1. 装入刷写了固件升级镜像的 microSD 卡。
2. 使用 Type-C 电源为板卡供电，红色 LED 灯立即亮起
3. 绿色 LED 灯开始闪烁
   - 总共会亮起 3 次
   - 在最后一次熄灭之前断开板卡电源可以取消升级
4. 绿色 LED 灯熄灭，开始自动升级固件
5. 绿色 LED 灯再次亮起，固件升级完成
6. 给板卡下电，并拔出 microSD 卡。

#### 重新配置板卡至 Flash 启动模式

拨动板卡上的 2 位拨码开关。将 1、2 位均拨至 ON 标记的一侧。

## 系统镜像部署

Mars 支持从下列存储媒介上加载操作系统：

- microSD
- USB

下载文件列表中标记为「系统镜像」的条目，解压得到后缀为 `.img` 的可烧录镜像文件。

将该镜像烧写至对应存储设备后，挂载到板卡上即可启动。
